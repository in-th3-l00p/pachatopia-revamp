---
import { useTranslations } from '../i18n/translations';

interface Props {
  lang?: "fr" | "en";
}

const { lang = "fr" } = Astro.props;
const t = useTranslations(lang);
---

<section
  id="about"
  data-testid="about-section"
  class="relative py-20 md:py-28 bg-cream overflow-hidden"
>
  <!-- Decorative background SVG elements -->
  <div class="absolute inset-0 pointer-events-none overflow-hidden" aria-hidden="true">
    <!-- Top-right leaf cluster -->
    <svg class="absolute -top-6 right-0 w-64 h-64 opacity-[0.06]" viewBox="0 0 200 200" fill="none">
      <path d="M140 20C140 20 180 60 170 110C160 160 120 180 80 170C40 160 20 120 30 80C40 40 80 20 140 20Z" fill="#0b5b4b"/>
      <path d="M100 30L105 100L140 60Z" fill="#2d9b83"/>
      <path d="M100 30L95 100L60 60Z" fill="#2d9b83"/>
    </svg>
    <!-- Bottom-left circle pattern -->
    <svg class="absolute -bottom-10 -left-10 w-48 h-48 opacity-[0.05]" viewBox="0 0 200 200" fill="none">
      <circle cx="100" cy="100" r="90" stroke="#0b5b4b" stroke-width="2"/>
      <circle cx="100" cy="100" r="70" stroke="#0b5b4b" stroke-width="1.5"/>
      <circle cx="100" cy="100" r="50" stroke="#2d9b83" stroke-width="1"/>
      <circle cx="100" cy="100" r="30" stroke="#2d9b83" stroke-width="0.8"/>
    </svg>
    <!-- Mid-left small leaf -->
    <svg class="absolute top-1/3 -left-4 w-32 h-32 opacity-[0.05] rotate-45" viewBox="0 0 100 100" fill="none">
      <path d="M50 5C50 5 90 25 85 60C80 95 50 95 50 95C50 95 20 95 15 60C10 25 50 5 50 5Z" fill="#0b5b4b"/>
      <line x1="50" y1="5" x2="50" y2="95" stroke="#2d9b83" stroke-width="1"/>
      <line x1="50" y1="30" x2="30" y2="50" stroke="#2d9b83" stroke-width="0.8"/>
      <line x1="50" y1="45" x2="70" y2="60" stroke="#2d9b83" stroke-width="0.8"/>
      <line x1="50" y1="60" x2="32" y2="72" stroke="#2d9b83" stroke-width="0.8"/>
    </svg>
  </div>

  <div class="relative z-10 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <!-- Section header -->
    <div class="text-center mb-14 md:mb-20">
      <h2
        data-testid="about-title"
        class="font-heading text-3xl sm:text-4xl md:text-5xl font-bold text-primary mb-4"
      >
        {t("about.title")}
      </h2>
      <!-- Decorative underline -->
      <div class="flex items-center justify-center gap-2 mb-6">
        <span class="block w-8 h-[2px] bg-accent rounded-full"></span>
        <svg class="w-5 h-5 text-accent" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
          <path d="M17 8C8 10 5.9 16.17 3.82 21.34L5.71 22l1-2.3A4.49 4.49 0 008 20c4 0 4-4 8-4s4 4 8 4a4.49 4.49 0 001.29-.34L17 8z"/>
          <path d="M14.5 4.5S13 6 13 7s.5 2 1.5 2S16 8 16 7s-1.5-2.5-1.5-2.5z"/>
          <path d="M19.5 1.5S18 3 18 4s.5 2 1.5 2S21 5 21 4s-1.5-2.5-1.5-2.5z"/>
        </svg>
        <span class="block w-8 h-[2px] bg-accent rounded-full"></span>
      </div>
      <p class="text-lg md:text-xl text-accent font-medium max-w-2xl mx-auto">
        {t("about.subtitle")}
      </p>
    </div>

    <!-- Two-column layout -->
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 lg:gap-16 items-center">
      <!-- Text column -->
      <div class="space-y-6">
        <p class="text-base md:text-lg text-gray-700 leading-relaxed">
          {t("about.text1")}
        </p>
        <p class="text-base md:text-lg text-gray-700 leading-relaxed">
          {t("about.text2")}
        </p>

        <!-- Highlight card -->
        <div class="relative mt-8 bg-white border-l-4 border-accent rounded-xl shadow-md p-6 md:p-8">
          <div class="absolute -top-3 -left-3 w-8 h-8 bg-accent/10 rounded-full flex items-center justify-center">
            <svg class="w-4 h-4 text-accent" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
              <path d="M12 2L9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2z"/>
            </svg>
          </div>
          <p class="text-primary font-medium text-base md:text-lg leading-relaxed italic">
            {t("about.association")}
          </p>
        </div>

        <!-- Link to full about page -->
        <a
          href={lang === "en" ? "/en/a-propos-de-nous/" : "/a-propos-de-nous/"}
          class="inline-flex items-center gap-2 mt-8 text-accent font-semibold hover:text-primary transition-colors"
        >
          {t("nav.about")}
          <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M17 8l4 4m0 0l-4 4m4-4H3"/></svg>
        </a>
      </div>

      <!-- Image column -->
      <div class="relative flex items-center justify-center">
        <div class="relative w-full max-w-md overflow-hidden rounded-2xl shadow-xl">
          <img
            src="/images/farm-hero.jpg"
            alt="Pachatopia farm in Colombia - nature and sustainable agriculture"
            class="w-full h-auto object-cover"
            loading="lazy"
          />
          <!-- Subtle overlay gradient -->
          <div class="absolute inset-0 bg-gradient-to-t from-primary/20 to-transparent pointer-events-none"></div>
        </div>
        <!-- Corner accent leaves -->
        <svg class="absolute top-2 right-2 w-12 h-12 text-accent opacity-20" viewBox="0 0 50 50" fill="currentColor" aria-hidden="true">
          <path d="M25 5C25 5 45 15 42 32C39 49 25 48 25 48C25 48 11 49 8 32C5 15 25 5 25 5Z"/>
        </svg>
        <svg class="absolute bottom-6 left-6 w-10 h-10 text-primary opacity-15 -rotate-45" viewBox="0 0 50 50" fill="currentColor" aria-hidden="true">
          <path d="M25 5C25 5 45 15 42 32C39 49 25 48 25 48C25 48 11 49 8 32C5 15 25 5 25 5Z"/>
        </svg>
      </div>
    </div>
  </div>
</section>
