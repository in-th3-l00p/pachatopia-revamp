---
import { useTranslations } from '../i18n/translations';

interface Props {
  lang?: "fr" | "en";
}

const { lang = "fr" } = Astro.props;
const t = useTranslations(lang);

const actions = [
  {
    key: "reserve" as const,
    percentage: 22,
    icon: "tree",
  },
  {
    key: "agriculture" as const,
    percentage: 18,
    icon: "seedling",
  },
  {
    key: "aquaculture" as const,
    percentage: 9,
    icon: "fish",
  },
  {
    key: "production" as const,
    percentage: 35,
    icon: "box",
  },
  {
    key: "participate" as const,
    percentage: 22,
    icon: "hands",
  },
  {
    key: "pachacoin" as const,
    percentage: 0,
    icon: "coin",
    raised: "$23,756",
  },
];
---

<section id="actions" data-testid="actions-section" class="py-20 bg-cream">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <!-- Section heading -->
    <div class="text-center mb-16">
      <h2 class="font-heading text-3xl sm:text-4xl font-bold text-primary mb-3 relative inline-block">
        {t("actions.title")}
        <span class="block w-16 h-1 bg-accent mx-auto mt-3 rounded-full"></span>
      </h2>
      <p class="text-lg text-gray-600 mt-4 max-w-2xl mx-auto">
        {t("actions.subtitle")}
      </p>
    </div>

    <!-- Cards grid -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
      {actions.map((action) => (
        <div
          data-testid="action-card"
          class="bg-white rounded-2xl p-8 shadow-sm hover:shadow-lg hover:-translate-y-1 transition-all duration-300 flex flex-col"
        >
          <!-- Icon -->
          <div class="w-14 h-14 rounded-xl bg-cream flex items-center justify-center mb-6">
            {action.icon === "tree" && (
              <svg xmlns="http://www.w3.org/2000/svg" class="w-7 h-7 text-primary" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
                <path d="M12 22V13" />
                <path d="M12 13L8 17" />
                <path d="M12 13L16 17" />
                <path d="M12 2L6 10h12L12 2Z" />
                <path d="M8 6L4 12h16L16 6" />
              </svg>
            )}
            {action.icon === "seedling" && (
              <svg xmlns="http://www.w3.org/2000/svg" class="w-7 h-7 text-primary" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
                <path d="M12 22V10" />
                <path d="M6 10C6 6 9 3 12 2c3 1 6 4 6 8" />
                <path d="M6 10c0 4 2.5 7 6 8" />
                <path d="M18 10c0 4-2.5 7-6 8" />
                <path d="M12 22c-4 0-7-2-8-4" />
                <path d="M12 22c4 0 7-2 8-4" />
              </svg>
            )}
            {action.icon === "fish" && (
              <svg xmlns="http://www.w3.org/2000/svg" class="w-7 h-7 text-primary" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
                <path d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7S2 12 2 12Z" />
                <path d="M22 12l-3-3v6l3-3Z" />
                <circle cx="8" cy="12" r="1" fill="currentColor" />
                <path d="M16 8c-2 1-3.5 2.5-4 4" />
                <path d="M2 12l3-3v6l-3-3Z" />
              </svg>
            )}
            {action.icon === "box" && (
              <svg xmlns="http://www.w3.org/2000/svg" class="w-7 h-7 text-primary" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
                <path d="M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z" />
                <path d="M3.27 6.96L12 12.01l8.73-5.05" />
                <path d="M12 22.08V12" />
              </svg>
            )}
            {action.icon === "hands" && (
              <svg xmlns="http://www.w3.org/2000/svg" class="w-7 h-7 text-primary" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
                <path d="M17 12C17 7 13 2 12 2S7 7 7 12" />
                <path d="M7 12c-2.5 0-5 1.5-5 4 0 1.5.5 2.5 2 3.5" />
                <path d="M17 12c2.5 0 5 1.5 5 4 0 1.5-.5 2.5-2 3.5" />
                <path d="M4 19.5C5.5 21 8 22 12 22s6.5-1 8-2.5" />
                <circle cx="12" cy="10" r="2" />
              </svg>
            )}
            {action.icon === "coin" && (
              <svg xmlns="http://www.w3.org/2000/svg" class="w-7 h-7 text-primary" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="12" cy="12" r="9" />
                <path d="M14.5 9a3.5 3.5 0 0 0-5 0" />
                <path d="M9.5 15a3.5 3.5 0 0 0 5 0" />
                <path d="M12 6v2" />
                <path d="M12 16v2" />
                <path d="M12 9v6" />
              </svg>
            )}
          </div>

          <!-- Title -->
          <h3 class="font-heading text-xl font-bold text-primary mb-3">
            {t(`actions.${action.key}.title`)}
          </h3>

          <!-- Description -->
          <p class="text-gray-600 text-sm leading-relaxed mb-6 flex-1">
            {t(`actions.${action.key}.desc`)}
          </p>

          <!-- Progress bar -->
          <div class="mt-auto">
            <div class="w-full h-2.5 bg-gray-200 rounded-full overflow-hidden">
              <div
                class="h-full bg-primary rounded-full transition-all duration-500"
                style={`width: ${action.percentage}%`}
              ></div>
            </div>
            <div class="mt-2 flex items-center justify-between">
              <span class="text-sm font-semibold text-primary">
                {action.percentage}% {t("actions.funded")}
              </span>
              {action.raised && (
                <span class="text-sm text-accent font-medium">
                  {action.raised}
                </span>
              )}
            </div>
          </div>
        </div>
      ))}
    </div>
  </div>
</section>
