---
import { useTranslations } from '../i18n/translations';

interface Props {
  lang?: "fr" | "en";
}

const { lang = "fr" } = Astro.props;
const t = useTranslations(lang);
---

<section
  data-testid="hero-section"
  class="hero-section relative min-h-screen flex items-center justify-center overflow-hidden"
>
  <!-- Background image with overlay -->
  <div class="absolute inset-0 -z-10" aria-hidden="true">
    <img
      src="/images/reserve-naturelle.webp"
      alt=""
      class="absolute inset-0 w-full h-full object-cover"
    />
    <div class="hero-bg absolute inset-0"></div>
  </div>

  <!-- Decorative SVG elements -->
  <div class="absolute inset-0 -z-5 overflow-hidden pointer-events-none" aria-hidden="true">
    <!-- Large soft circle top-right -->
    <svg
      class="hero-circle-1 absolute -top-24 -right-24 w-[500px] h-[500px] opacity-[0.07]"
      viewBox="0 0 500 500"
      fill="none"
    >
      <circle cx="250" cy="250" r="250" fill="currentColor" class="text-accent" />
    </svg>

    <!-- Smaller circle bottom-left -->
    <svg
      class="hero-circle-2 absolute -bottom-16 -left-16 w-[350px] h-[350px] opacity-[0.06]"
      viewBox="0 0 350 350"
      fill="none"
    >
      <circle cx="175" cy="175" r="175" fill="currentColor" class="text-cream" />
    </svg>

    <!-- Mid-circle center-left -->
    <svg
      class="hero-circle-3 absolute top-1/3 -left-20 w-[200px] h-[200px] opacity-[0.05]"
      viewBox="0 0 200 200"
      fill="none"
    >
      <circle cx="100" cy="100" r="100" fill="currentColor" class="text-accent" />
    </svg>

    <!-- Leaf shape top-left -->
    <svg
      class="hero-leaf-1 absolute top-16 left-[8%] w-20 h-20 opacity-[0.12] text-accent"
      viewBox="0 0 100 100"
      fill="none"
    >
      <path
        d="M50 5C50 5 90 30 90 65C90 82 72 95 50 95C28 95 10 82 10 65C10 30 50 5 50 5Z"
        fill="currentColor"
      />
      <path
        d="M50 25V85M50 45L35 55M50 55L65 45M50 65L38 72M50 75L60 68"
        stroke="rgba(255,255,255,0.3)"
        stroke-width="1.5"
        stroke-linecap="round"
      />
    </svg>

    <!-- Leaf shape right side -->
    <svg
      class="hero-leaf-2 absolute top-[55%] right-[6%] w-24 h-24 opacity-[0.10] text-accent"
      viewBox="0 0 100 100"
      fill="none"
    >
      <path
        d="M50 5C50 5 90 30 90 65C90 82 72 95 50 95C28 95 10 82 10 65C10 30 50 5 50 5Z"
        fill="currentColor"
      />
      <path
        d="M50 25V85M50 45L35 55M50 55L65 45M50 65L38 72M50 75L60 68"
        stroke="rgba(255,255,255,0.3)"
        stroke-width="1.5"
        stroke-linecap="round"
      />
    </svg>

    <!-- Small leaf bottom-center -->
    <svg
      class="hero-leaf-3 absolute bottom-[12%] left-[35%] w-14 h-14 opacity-[0.09] text-cream"
      viewBox="0 0 100 100"
      fill="none"
    >
      <path
        d="M50 5C50 5 90 30 90 65C90 82 72 95 50 95C28 95 10 82 10 65C10 30 50 5 50 5Z"
        fill="currentColor"
      />
      <path
        d="M50 25V85M50 45L35 55M50 55L65 45"
        stroke="rgba(255,255,255,0.25)"
        stroke-width="1.5"
        stroke-linecap="round"
      />
    </svg>

    <!-- Organic blob shape top-center-right -->
    <svg
      class="hero-blob absolute top-[10%] right-[25%] w-36 h-36 opacity-[0.05] text-cream"
      viewBox="0 0 200 200"
      fill="none"
    >
      <path
        d="M100 20C140 20 170 40 175 80C180 120 160 150 130 170C100 190 60 180 35 155C10 130 15 90 35 60C55 30 70 20 100 20Z"
        fill="currentColor"
      />
    </svg>

    <!-- Small floating dots -->
    <svg
      class="hero-dots absolute top-[25%] left-[20%] w-4 h-4 opacity-[0.15]"
      viewBox="0 0 16 16"
      fill="none"
    >
      <circle cx="8" cy="8" r="8" fill="currentColor" class="text-cream" />
    </svg>
    <svg
      class="hero-dots-2 absolute top-[40%] right-[15%] w-3 h-3 opacity-[0.12]"
      viewBox="0 0 16 16"
      fill="none"
    >
      <circle cx="8" cy="8" r="8" fill="currentColor" class="text-cream" />
    </svg>
    <svg
      class="hero-dots-3 absolute bottom-[30%] left-[12%] w-2.5 h-2.5 opacity-[0.10]"
      viewBox="0 0 16 16"
      fill="none"
    >
      <circle cx="8" cy="8" r="8" fill="currentColor" class="text-accent" />
    </svg>

    <!-- Organic wavy line bottom -->
    <svg
      class="hero-wave absolute bottom-0 left-0 w-full h-24 opacity-[0.08]"
      viewBox="0 0 1440 96"
      preserveAspectRatio="none"
      fill="none"
    >
      <path
        d="M0 64C240 32 480 96 720 64C960 32 1200 80 1440 48V96H0V64Z"
        fill="currentColor"
        class="text-cream"
      />
    </svg>
  </div>

  <!-- Main content -->
  <div class="hero-content relative z-10 max-w-4xl mx-auto px-6 py-24 text-center">
    <!-- Decorative top flourish -->
    <div class="hero-flourish flex items-center justify-center gap-3 mb-8">
      <span class="block w-12 h-px bg-accent/40"></span>
      <svg class="w-6 h-6 text-accent/60" viewBox="0 0 24 24" fill="currentColor">
        <path d="M12 2C12 2 18 7 18 13C18 17 15 20 12 20C9 20 6 17 6 13C6 7 12 2 12 2Z" />
      </svg>
      <span class="block w-12 h-px bg-accent/40"></span>
    </div>

    <!-- Main heading -->
    <h1
      data-testid="hero-title"
      class="hero-title font-heading text-4xl sm:text-5xl md:text-6xl lg:text-7xl font-bold text-cream leading-tight tracking-tight mb-6"
    >
      {t("hero.welcome")}
    </h1>

    <!-- Tagline -->
    <p
      data-testid="hero-tagline"
      class="hero-tagline text-xl sm:text-2xl md:text-3xl text-accent font-heading italic mb-8 tracking-wide"
    >
      {t("hero.tagline")}
    </p>

    <!-- Description -->
    <p
      class="hero-description text-base sm:text-lg md:text-xl text-cream/80 max-w-2xl mx-auto leading-relaxed mb-12"
    >
      {t("hero.description")}
    </p>

    <!-- CTA buttons -->
    <div class="hero-buttons flex flex-col sm:flex-row items-center justify-center gap-4 sm:gap-6">
      <a
        href={lang === "en" ? "/en/comment-participer/" : "/comment-participer/"}
        class="hero-btn-primary group relative inline-flex items-center justify-center px-8 py-4 text-base sm:text-lg font-semibold text-primary bg-cream rounded-full overflow-hidden transition-all duration-300 hover:shadow-[0_8px_30px_rgba(248,246,240,0.3)] hover:scale-[1.03] active:scale-[0.98]"
      >
        <span class="relative z-10">{t("hero.cta.participate")}</span>
        <span class="absolute inset-0 bg-accent/10 scale-x-0 group-hover:scale-x-100 transition-transform duration-300 origin-left rounded-full"></span>
      </a>
      <a
        href={lang === "en" ? "/en/contacts/" : "/contacts/"}
        class="hero-btn-outline inline-flex items-center justify-center px-8 py-4 text-base sm:text-lg font-semibold text-cream border-2 border-cream/50 rounded-full transition-all duration-300 hover:bg-cream/10 hover:border-cream hover:shadow-[0_8px_30px_rgba(248,246,240,0.1)] hover:scale-[1.03] active:scale-[0.98]"
      >
        {t("hero.cta.contact")}
      </a>
    </div>

    <!-- Scroll indicator -->
    <div class="hero-scroll-hint mt-16 flex flex-col items-center gap-2 opacity-60">
      <span class="text-cream/60 text-xs uppercase tracking-[0.2em]">Scroll</span>
      <svg
        class="w-5 h-8 text-cream/50 animate-bounce"
        viewBox="0 0 20 32"
        fill="none"
        stroke="currentColor"
        stroke-width="1.5"
      >
        <rect x="1" y="1" width="18" height="30" rx="9" />
        <circle cx="10" cy="10" r="2.5" fill="currentColor" class="hero-scroll-dot" />
      </svg>
    </div>
  </div>
</section>

<style>
  /* ── Background gradient overlay on image ── */
  .hero-bg {
    background:
      radial-gradient(ellipse 80% 60% at 20% 80%, rgba(45, 155, 131, 0.3) 0%, transparent 60%),
      radial-gradient(ellipse 60% 50% at 85% 20%, rgba(45, 155, 131, 0.2) 0%, transparent 50%),
      radial-gradient(ellipse 100% 80% at 50% 50%, rgba(11, 91, 75, 0.5) 0%, transparent 70%),
      linear-gradient(
        160deg,
        rgba(7, 46, 38, 0.85) 0%,
        rgba(9, 74, 61, 0.78) 20%,
        rgba(11, 91, 75, 0.72) 40%,
        rgba(13, 110, 90, 0.70) 60%,
        rgba(11, 91, 75, 0.78) 80%,
        rgba(7, 46, 38, 0.85) 100%
      );
  }

  /* ── Entrance animations ── */
  @keyframes hero-fade-up {
    from {
      opacity: 0;
      transform: translateY(30px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes hero-fade-in {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }

  @keyframes hero-scale-in {
    from {
      opacity: 0;
      transform: scale(0.85);
    }
    to {
      opacity: 1;
      transform: scale(1);
    }
  }

  @keyframes hero-slide-right {
    from {
      opacity: 0;
      transform: translateX(-20px);
    }
    to {
      opacity: 1;
      transform: translateX(0);
    }
  }

  @keyframes hero-slide-left {
    from {
      opacity: 0;
      transform: translateX(20px);
    }
    to {
      opacity: 1;
      transform: translateX(0);
    }
  }

  @keyframes hero-float {
    0%, 100% {
      transform: translateY(0);
    }
    50% {
      transform: translateY(-12px);
    }
  }

  @keyframes hero-float-slow {
    0%, 100% {
      transform: translateY(0) rotate(0deg);
    }
    50% {
      transform: translateY(-8px) rotate(3deg);
    }
  }

  @keyframes hero-scroll-pulse {
    0%, 100% {
      transform: translateY(0);
      opacity: 1;
    }
    50% {
      transform: translateY(6px);
      opacity: 0.3;
    }
  }

  /* ── Apply entrance animations ── */
  .hero-flourish {
    opacity: 0;
    animation: hero-fade-in 0.8s ease-out 0.2s forwards;
  }

  .hero-title {
    opacity: 0;
    animation: hero-fade-up 0.9s ease-out 0.4s forwards;
  }

  .hero-tagline {
    opacity: 0;
    animation: hero-fade-up 0.9s ease-out 0.65s forwards;
  }

  .hero-description {
    opacity: 0;
    animation: hero-fade-up 0.9s ease-out 0.85s forwards;
  }

  .hero-buttons {
    opacity: 0;
    animation: hero-fade-up 0.9s ease-out 1.05s forwards;
  }

  .hero-scroll-hint {
    opacity: 0;
    animation: hero-fade-in 1s ease-out 1.4s forwards;
  }

  .hero-scroll-dot {
    animation: hero-scroll-pulse 2s ease-in-out infinite;
  }

  /* ── Decorative element animations ── */
  .hero-circle-1 {
    opacity: 0;
    animation:
      hero-scale-in 1.2s ease-out 0.3s forwards,
      hero-float-slow 8s ease-in-out 1.5s infinite;
  }

  .hero-circle-2 {
    opacity: 0;
    animation:
      hero-scale-in 1.2s ease-out 0.5s forwards,
      hero-float-slow 10s ease-in-out 1.7s infinite;
  }

  .hero-circle-3 {
    opacity: 0;
    animation:
      hero-scale-in 1.2s ease-out 0.7s forwards,
      hero-float 7s ease-in-out 1.9s infinite;
  }

  .hero-leaf-1 {
    opacity: 0;
    animation:
      hero-slide-right 1s ease-out 0.6s forwards,
      hero-float-slow 6s ease-in-out 1.6s infinite;
  }

  .hero-leaf-2 {
    opacity: 0;
    animation:
      hero-slide-left 1s ease-out 0.8s forwards,
      hero-float-slow 7s ease-in-out 1.8s infinite;
  }

  .hero-leaf-3 {
    opacity: 0;
    animation:
      hero-fade-up 1s ease-out 1s forwards,
      hero-float 9s ease-in-out 2s infinite;
  }

  .hero-blob {
    opacity: 0;
    animation:
      hero-scale-in 1.4s ease-out 0.9s forwards,
      hero-float-slow 11s ease-in-out 2.3s infinite;
  }

  .hero-dots {
    opacity: 0;
    animation:
      hero-fade-in 1s ease-out 1s forwards,
      hero-float 5s ease-in-out 2s infinite;
  }

  .hero-dots-2 {
    opacity: 0;
    animation:
      hero-fade-in 1s ease-out 1.1s forwards,
      hero-float 6s ease-in-out 2.1s infinite;
  }

  .hero-dots-3 {
    opacity: 0;
    animation:
      hero-fade-in 1s ease-out 1.2s forwards,
      hero-float 7s ease-in-out 2.2s infinite;
  }

  .hero-wave {
    opacity: 0;
    animation: hero-fade-in 1.5s ease-out 0.8s forwards;
  }

  /* ── Ensure final opacity values match design intent ── */
  .hero-circle-1 { --final-opacity: 0.07; }
  .hero-circle-2 { --final-opacity: 0.06; }
  .hero-circle-3 { --final-opacity: 0.05; }
  .hero-leaf-1 { --final-opacity: 0.12; }
  .hero-leaf-2 { --final-opacity: 0.10; }
  .hero-leaf-3 { --final-opacity: 0.09; }
  .hero-blob { --final-opacity: 0.05; }
  .hero-dots { --final-opacity: 0.15; }
  .hero-dots-2 { --final-opacity: 0.12; }
  .hero-dots-3 { --final-opacity: 0.10; }
  .hero-wave { --final-opacity: 0.08; }

  /* ── Respect reduced motion preference ── */
  @media (prefers-reduced-motion: reduce) {
    .hero-flourish,
    .hero-title,
    .hero-tagline,
    .hero-description,
    .hero-buttons,
    .hero-scroll-hint,
    .hero-circle-1,
    .hero-circle-2,
    .hero-circle-3,
    .hero-leaf-1,
    .hero-leaf-2,
    .hero-leaf-3,
    .hero-blob,
    .hero-dots,
    .hero-dots-2,
    .hero-dots-3,
    .hero-wave {
      animation: none;
      opacity: 1;
    }

    .hero-scroll-dot {
      animation: none;
    }
  }
</style>
